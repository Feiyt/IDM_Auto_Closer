
# IDM Auto Closer

IDM Auto Closer 是一个用 Go 语言编写的轻量级工具，可自动监控 Internet Download Manager (IDM) 的下载状态，并在所有下载完成后自动关闭 IDM，无需对 IDM 本身做任何修改。

---

## 功能特性

- **自动检测 IDM 路径：** 自动从 Windows 注册表查找 IDM 的安装位置。
- **智能监控：**  
    - 后台常驻，自动等待 IDM 启动。
    - 实时监控 IDM 进程的 I/O 活动。
    - **空闲检测：** 当 IDM 处于空闲状态（I/O 速度 < 1KB/s）并持续 **10 秒**以上（多次检测确认），即判定为无下载任务。
- **自动关闭：**  
    - 确认处于空闲状态后自动结束 IDM 进程。
- **单实例运行：**  
    - 防止重复启动多个本工具实例。
- **极致轻量：**  
    - 编译为单一可执行文件，资源占用极低。

---

## 使用方法

### 1. 环境准备

- 需先安装 Go 语言环境。
    [Go 下载地址](https://go.dev/dl/)

### 2. 编译

- 双击运行 `build.bat` 脚本。
- 脚本会自动检查 Go 环境并编译程序。
- 编译成功后会生成 `IDM_Auto_Closer.exe`。
- **注意：** 默认编译配置会隐藏控制台窗口（后台静默运行）。如需查看日志，请编辑 `build.bat`，去掉 `-ldflags "-H=windowsgui"` 参数。

### 3. 运行

- 直接运行生成的 `IDM_Auto_Closer.exe`。
- 程序会自动在后台运行。
- 可通过任务管理器查看进程。
- 如需退出，请在任务管理器中结束该进程。

---

## 目录结构

- `main.go`：主程序源码
- `build.bat`：编译脚本

---

## 注意事项

- 本工具通过监控 IDM 进程的 I/O 活动（而非直接监控网络流量）判断下载状态。
- **程序启动后会立即开始监控空闲状态**，如果 IDM 当前没有下载任务，程序将在 10 秒后自动关闭 IDM。
- 建议在需要下载文件时再启动 IDM（或让浏览器自动唤起 IDM），本工具会在后台自动接管监控。


