# IDM Auto Closer

这是一个使用 Go 语言编写的轻量级工具，用于自动监控 Internet Download Manager (IDM) 的下载状态，并在下载完成后自动关闭 IDM。可以在不对 IDM 进行任何修改的情况下使用，防止出现各种弹窗问题。

***！！！ 由于程序的运行原理是检测网络流量，因此建议配置好 IDM 所有设置后再开启程序，防止在配置过程中直接结束 IDM 进程导致配置失败。***

## 功能

1.  **自动检索 IDM 路径**：自动从注册表中查找 IDM 的安装位置。
2.  **智能监控**：
    *   程序启动后会后台常驻，等待 IDM 启动。
    *   当检测到 IDM 有高网络流量（>10KB/s）时，判定为“正在下载”。
    *   当流量恢复平静（<1KB/s）并持续 10 秒以上时，判定为“下载完成”。
3.  **自动关闭**：下载完成且流量持续平静（<1KB/s）10 秒自动结束 IDM 进程。
4.  **轻量高效**：使用 Go 语言编写，编译后为单一可执行文件，占用资源极低。

## 使用方法

### 1. 环境准备
确保你的电脑上安装了 Go 语言环境。
- 下载地址：[https://go.dev/dl/](https://go.dev/dl/)

### 2. 编译
双击运行 `build.bat` 脚本。
- 脚本会自动检查 Go 环境并编译程序。
- 编译成功后会生成 `IDM_Auto_Closer.exe`。
- **注意**：默认编译配置隐藏了控制台窗口（后台静默运行）。如果你想看到运行日志，请编辑 `build.bat`，去掉 `-ldflags "-H=windowsgui"` 参数。

### 3. 运行
直接运行生成的 `IDM_Auto_Closer.exe` 即可。
- 程序会自动在后台运行。
- 你可以通过任务管理器查看 `IDM_Auto_Closer.exe` 进程。
- 要停止程序，请在任务管理器中结束该进程。

## 目录结构
- `main.go`: 源代码文件。
- `build.bat`: 编译脚本。


